{% extends 'base.html' %}
{% block content%}
<!-- navbar -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<header id="header" class=" d-flex align-items-center header-transparent bg-dark">
  <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

    <a href="/" class="logo d-flex align-items-center scrollto me-auto me-lg-0">
      <img src="https://lh3.googleusercontent.com/UCn7nAp9EOMNuBosMWMuGfeltNp7fz2iYABJJiejL86HsKXYOlweRu8fMcR69Itpuu7B4FqS_48BcOFeYGpMOElE_pUIr2dnExt2ahLWCPn0-L1Iideo8dL-WJFXOT-CheoTBjp0lA=w2400" alt="">
      <h1 class="animate__animated animate__rubberBand animate__delay-2s">Bambi<span></span></h1>
    </a>
    <nav id="navbar" class="navbar order-last order-lg-0">
      <ul>
        <li><a class="nav-link scrollto active" href="/">Home</a></li>
        <li><a class="nav-link scrollto" href="/">About</a></li>
        <!-- <li><a class="nav-link scrollto" href="#menu"></a></li>
        <li><a class="nav-link scrollto" href="#specials"></a></li>
        <li><a class="nav-link scrollto" href="#events"></a></li>
        <li><a class="nav-link scrollto" href="#chefs"></a></li> -->
        <li><a class="nav-link scrollto" href="/product">Products</a></li>
        <li><a class="nav-link scrollto" href="/carts">Cart ({{ session['Shoppingcart']|length }})</a></li> 
        <!-- <li><a class="nav-link scrollto" href="/quiz">Quiz</a></li>          
        <li><a class="nav-link scrollto" href="#contact">Contact</a></li> -->
      </ul>
      <i class="bi bi-list mobile-nav-toggle"></i>
    </nav><!-- .navbar -->
   
    <a href="/authenticate/login" class="book-a-table-btn  animate__animated animate__shakeX animate__delay-4s">Get Started</a>

  </div>
</header>

    <!-- navbar -->
    <div class="container">
       



        <div class="row">
            {% if get_cat_prod %}
            {% for get_cat in get_cat_prod.items %}
            <div class="col-md-3 mt-4">
                <div class="card">
                    <img src="{{url_for('static', filename='photos/' + get_cat.image_1)}}" class="card-img-top img-thumbnail" alt="{{get_cat.name}}" height="200" width="200">
                    <div class="card-body">
                        {% if get_cat.discount > 0 %}
                        <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{get_cat.discount}}%</h5>
                        {% endif %}
                      <h5 class="text-center">{{get_cat.name}}</h5>
                      <p class="text-center">Price Kshs {{get_cat.price}}</p>
                    </div>
                    <div class="card-footer">
                        <a href="{{url_for('main.single_page', id=get_cat.id)}}" class="float-left btn btn-sm btn-primary">Details</a>
                        <form action="{{url_for('main.AddCart')}}" method="post">
                          <input type="hidden" name="product_id" value="{{get_cat.id}}">
                          <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                          <input type="hidden" name="quantity" value="1" min="1" max="20">
                          
                      </form>
                    </div>
                </div>
              </div>
    
            {% endfor %}
          </div>
    
          <div class="row mt-4">
            <div class="col text-center">
              {% if get_cat_prod.has_prev %}
                <a href="{{url_for('get_category',id=get_cat.id, page=get_cat_prod.prev_num)}}"class="btn btn-sm btn-outline-info">previus</a>
              {% endif %}
              {% if get_cat_prod.total > 8 %}
             {% for page_num in get_cat_prod.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
             {% if page_num %}
               {% if get_cat_prod.page == page_num %}
               <a href="{{url_for('get_category',id=get_cat.id, page=page_num)}}" class="btn btn-sm btn-info">{{page_num}}</a>
               {% else %}
               <a href="{{url_for('get_category',id=get_cat.id, page=page_num)}}" class="btn btn-sm btn-outline-info">{{page_num}}</a>
                {% endif %}
              {% else %}
              ...
              {% endif %}
             {% endfor %}
             {% endif %}
             {% if get_cat_prod.has_next %}
             <a href="{{url_for('home', page=get_cat_prod.next_num)}}"class="btn btn-sm btn-outline-info">next</a>
           {% endif %}
            </div>
          </div>
            <!--========= END ELSE IF ===============-->   
    <div class="row">
        {% else %}
       {% for product in products.items %}
     <div class="col-md-3 mt-4">
       <div class="card">
           <img src="{{url_for('static', filename='photos/' + product.image_1)}}" class="card-img-top img-thumbnail alt="{{product.name}}" height="200" width="200">
           <div class="card-body">
               {% if product.discount > 0 %}
               <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{product.discount}}%</h5>
               {% endif %}
             <h5 class="text-center">{{product.name}}</h5>
             <p class="text-center">Price Kshs {{product.price}}</p>
           </div>
           <div class="card-footer">
               <a href="{{url_for('main.single_page', id=product.id)}}" class="float-left btn btn-sm btn-primary">Details</a>
               <form action="{{url_for('main.AddCart')}}" method="post">
                 <input type="hidden" name="product_id" value="{{product.id}}">
                 <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                 <input type="hidden" name="quantity" value="1" min="1" max="20">
                 
             </form>
           </div>
       </div>
     </div>
       {% endfor %}
     </div>

     <div class="row mt-4">
       <div class="col text-center">
         {% if products.has_prev %}
           <a href="{{url_for('home', page=products.prev_num)}}"class="btn btn-sm btn-outline-info">previous</a>
         {% endif %}
         {% if products.total> 8 %}
        {% for page_num in products.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
        {% if page_num %}
          {% if products.page == page_num %}
          <a href="{{url_for('home', page=page_num)}}" class="btn btn-sm btn-info">{{page_num}}</a>
          {% else %}
          <a href="{{url_for('home', page=page_num)}}" class="btn btn-sm btn-outline-info">{{page_num}}</a>
           {% endif %}
         {% else %}
         ...
         {% endif %}
        {% endfor %}
        {% endif %}
        {% if products.has_next %}
        <a href="{{url_for('home', page=products.next_num)}}"class="btn btn-sm btn-outline-info">next</a>
      {% endif %}
       </div>
     </div>
     {% endif %}
   </div>
</div>
{% endblock content %}
