{% extends 'base.html' %}
{% block content%}
<!-- navbar -->
<title>Bambi Petstore</title>
<meta content="" name="description">
<meta content="" name="keywords">
<!-- Favicons -->
<link href="https://lh3.googleusercontent.com/UCn7nAp9EOMNuBosMWMuGfeltNp7fz2iYABJJiejL86HsKXYOlweRu8fMcR69Itpuu7B4FqS_48BcOFeYGpMOElE_pUIr2dnExt2ahLWCPn0-L1Iideo8dL-WJFXOT-CheoTBjp0lA=w2400" rel="icon">


<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,600,600i,700,700i|Satisfy|Comic+Neue:300,300i,400,400i,700,700i" rel="stylesheet">

<!--Bootstrap CSS Links -->
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"/>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.2/font/bootstrap-icons.min.css" integrity="sha512-YzwGgFdO1NQw1CZkPoGyRkEnUTxPSbGWXvGiXrWk8IeSqdyci0dEDYdLLjMxq1zCoU0QBa4kHAFiRhUL3z2bow==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" integrity="sha512-ZKX+BvQihRJPA8CROKBhDNvoc2aDMOdAlcm7TUQY+35XYtrd3yh95QOOhsPDQY9QnKE0Wqag9y38OIgEvb88cA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.1.5/swiper-bundle.css" integrity="sha512-FaNMmVTIJuY9h9nJoygs85xfABCEB70VrFRwHgrSD0Eiw25Px+ehJZYzTDzrqnJjUoq3+XE7LkDvdPZWL/zAxw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- CSS File -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<!-- ======= Header ======= -->
<header id="header" class="d-flex align-items-center header-transparent bg-dark">
  <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

    <a href="/" class="logo d-flex align-items-center scrollto me-auto me-lg-0">
      <img src="https://lh3.googleusercontent.com/UCn7nAp9EOMNuBosMWMuGfeltNp7fz2iYABJJiejL86HsKXYOlweRu8fMcR69Itpuu7B4FqS_48BcOFeYGpMOElE_pUIr2dnExt2ahLWCPn0-L1Iideo8dL-WJFXOT-CheoTBjp0lA=w2400" alt="">
      <h1 class="animate__animated animate__rubberBand animate__delay-2s">Bambi<span></span></h1>
    </a>
    <nav id="navbar" class="navbar order-last order-lg-0">
      <ul>
        <li><a class="nav-link scrollto active" href="/">Home</a></li>
        <li><a class="nav-link scrollto" href="/">About</a></li>

        <li><a class="nav-link scrollto" href="/product">Products</a></li>
        <li><a class="nav-link scrollto" href="/quiz">Quiz</a></li>          
        <li><a class="nav-link scrollto" href="/carts">Cart</a></li>
      </ul>
      <i class="bi bi-list mobile-nav-toggle"></i>
    </nav>

    {% if current_user.is_authenticated %}
  <a href="/profile" class="book-a-table-btn">{{current_user.username}}</a>
  <a href="{{url_for('auth.logout')}}" class="book-a-table-btn">Logout</a>
  {% else %}
  <a href="/authenticate/login" class="book-a-table-btn ">Get started</a>
  {% endif %}

  </div>
</header>

    <!-- navbar -->
    <div class="container">
       



        <div class="row">
            {% if get_cat_prod %}
            {% for get_cat in get_cat_prod.items %}
            <div class="col-md-3 mt-4">
                <div class="card">
                    <img src="{{url_for('static', filename='photos/' + get_cat.image_1)}}" class="card-img-top img-thumbnail" alt="{{get_cat.name}}" height="200" width="200">
                    <div class="card-body">
                        {% if get_cat.discount > 0 %}
                        <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{get_cat.discount}}%</h5>
                        {% endif %}
                      <h5 class="text-center">{{get_cat.name}}</h5>
                      <p class="text-center">Price Kshs {{get_cat.price}}</p>
                    </div>
                    <div class="card-footer">
                        <a href="{{url_for('main.single_page', id=get_cat.id)}}" class="float-left btn btn-sm btn-primary">Details</a>
                        <form action="{{url_for('main.AddCart')}}" method="post">
                          <input type="hidden" name="product_id" value="{{get_cat.id}}">
                          <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                          <input type="hidden" name="quantity" value="1" min="1" max="20">
                          
                      </form>
                    </div>
                </div>
              </div>
    
            {% endfor %}
          </div>
    
          <div class="row mt-4">
            <div class="col text-center">
              {% if get_cat_prod.has_prev %}
                <a href="{{url_for('get_category',id=get_cat.id, page=get_cat_prod.prev_num)}}"class="btn btn-sm btn-outline-info">previus</a>
              {% endif %}
              {% if get_cat_prod.total > 8 %}
             {% for page_num in get_cat_prod.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
             {% if page_num %}
               {% if get_cat_prod.page == page_num %}
               <a href="{{url_for('get_category',id=get_cat.id, page=page_num)}}" class="btn btn-sm btn-info">{{page_num}}</a>
               {% else %}
               <a href="{{url_for('get_category',id=get_cat.id, page=page_num)}}" class="btn btn-sm btn-outline-info">{{page_num}}</a>
                {% endif %}
              {% else %}
              ...
              {% endif %}
             {% endfor %}
             {% endif %}
             {% if get_cat_prod.has_next %}
             <a href="{{url_for('home', page=get_cat_prod.next_num)}}"class="btn btn-sm btn-outline-info">next</a>
           {% endif %}
            </div>
          </div>
            <!--========= END ELSE IF ===============-->   
    <div class="row">
        {% else %}
       {% for product in products.items %}
     <div class="col-md-3 mt-4">
       <div class="card">
           <img src="{{url_for('static', filename='photos/' + product.image_1)}}" class="card-img-top img-thumbnail alt="{{product.name}}" height="200" width="200">
           <div class="card-body">
               {% if product.discount > 0 %}
               <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{product.discount}}%</h5>
               {% endif %}
             <h5 class="text-center">{{product.name}}</h5>
             <p class="text-center">Price Kshs {{product.price}}</p>
           </div>
           <div class="card-footer">
               <a href="{{url_for('main.single_page', id=product.id)}}" class="float-left btn btn-sm btn-primary">Details</a>
               <form action="{{url_for('main.AddCart')}}" method="post">
                 <input type="hidden" name="product_id" value="{{product.id}}">
                 <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                 <input type="hidden" name="quantity" value="1" min="1" max="20">
                 
             </form>
           </div>
       </div>
     </div>
       {% endfor %}
     </div>

     <div class="row mt-4">
       <div class="col text-center">
         {% if products.has_prev %}
           <a href="{{url_for('home', page=products.prev_num)}}"class="btn btn-sm btn-outline-info">previous</a>
         {% endif %}
         {% if products.total> 8 %}
        {% for page_num in products.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
        {% if page_num %}
          {% if products.page == page_num %}
          <a href="{{url_for('home', page=page_num)}}" class="btn btn-sm btn-info">{{page_num}}</a>
          {% else %}
          <a href="{{url_for('home', page=page_num)}}" class="btn btn-sm btn-outline-info">{{page_num}}</a>
           {% endif %}
         {% else %}
         ...
         {% endif %}
        {% endfor %}
        {% endif %}
        {% if products.has_next %}
        <a href="{{url_for('home', page=products.next_num)}}"class="btn btn-sm btn-outline-info">next</a>
      {% endif %}
       </div>
     </div>
     {% endif %}
   </div>
</div>
{% endblock content %}
